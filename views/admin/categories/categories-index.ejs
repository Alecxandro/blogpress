<%- include('../../partials/header.ejs') %> <%-
include('../../partials/navbar.ejs') %>

<div class="container">
  <h2>Categories</h2>
  <hr />
  <a href="/admin/categories/new-category" class="btn btn-success">Create new category</a>
  <br>
  <br>
  <table class="table table-sm table-hover">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>TITLE</th>
        <th>SLUG</th>
        <th>ACTIONS</th>
      </tr>
    </thead>

    <tbody>
      <tr>

        <% categories.forEach((category) => { %>
        <th><%= category.category_id %></th>
        <th><%= category.title %></th>
        <th><%= category.slug %></th>
        <th>

            
          
          
          
            <form method="POST" action="/categories/delete" style="display: inline;" onsubmit="confirmCategoryDelete(event, this)">
                <input type="hidden" name="id" value="<%= category.category_id %>">
                <button class="btn btn-danger">Delete</button>
            </form>
            <a href="/admin/categories/edit-category/<%= category.category_id%>" class="btn btn-warning">Edit</a>
            

            
            
        </th>
      </tr>
      <% } ) %>

    </tbody>
  </table>
</div>

<%- include('../../partials/footer.ejs') %>
<script>
    function confirmCategoryDelete(event, form) {
        event.preventDefault();
        const confirmation = confirm('Are you sure you want to delete this category?')
        if (confirmation) form.submit();

    }
</script>